<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boston Briefing • Internal Beta</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="robots" content="noindex,nofollow" />
</head>
<body>
  <div class="beta-banner">
    <strong>INTERNAL BETA</strong>
    <span>Private test. Do not share externally.</span>
  </div>

  <header class="wrap">
    <h1>Boston Briefing</h1>
    <p class="tag">AI‑written script • AI recreation of Matt Karolian’s voice</p>
  </header>

  <main class="wrap">
    <section class="card">
      <h2 id="ep-title">Loading latest episode…</h2>
      <audio id="player" controls preload="none" style="width:100%"></audio>

      <div class="row">
        <a id="rss-link" class="btn" target="_blank" rel="noopener">Podcast RSS</a>
        <a id="notes-link" class="btn btn-ghost" target="_blank" rel="noopener">Shownotes</a>
      </div>

      <p class="small dim">
        Stories summarized by AI from The Boston Globe, Boston.com, and B‑Side (plus other major Boston outlets).
        Facts only. No opinion. Please keep this link private.
      </p>
    </section>

    <section class="card">
      <h3>About this test</h3>
      <ul class="small">
        <li>The script and summaries are generated by AI.</li>
        <li>The voice is an AI recreation of Matt Karolian’s voice.</li>
        <li>Content is for internal evaluation only.</li>
      </ul>
      <p class="small">Feedback? <a href="mailto:Matt@Boston.com">Matt@Boston.com</a></p>
    </section>
  </main>

  <footer class="wrap small dim">
    © <span id="year"></span> Boston Briefing • Internal Beta
  </footer>

  <script>
    (function () {
      // Base path for GitHub Pages project site
      var base = location.pathname.replace(/\/$/, "");
      // If the site is published at /boston-briefing/, keep that path; else fallback
      var FEED_URL = base + "feed.xml";
      var NOTES_URL = base + "shownotes/";

      document.getElementById("rss-link").href = FEED_URL;
      document.getElementById("notes-link").href = NOTES_URL;
      document.getElementById("year").textContent = new Date().getFullYear();

      fetch(FEED_URL, { cache: "no-store" })
        .then(function(r){ return r.text(); })
        .then(function(xml){
          var dom = new window.DOMParser().parseFromString(xml, "text/xml");
          var item = dom.querySelector("channel > item");
          var title = item && item.querySelector("title") ? item.querySelector("title").textContent : "Latest Episode";
          var enclosure = item && item.querySelector("enclosure") ? item.querySelector("enclosure").getAttribute("url") : null;
          document.getElementById("ep-title").textContent = title;
          if (enclosure) document.getElementById("player").src = enclosure;
        })
        .catch(function(){
          document.getElementById("ep-title").textContent = "Couldn’t load the latest episode yet. Try refreshing in a minute.";
        });
    })();
  </script>
</body>
</html>
